import{r as a,f as v,j as t,F as T,d as H,e as M,y as P,A as x,B as z,C as A,R as B}from"./index-BXZHyYEo.js";function O(){const[w,p]=a.useState(""),[g,S]=a.useState(""),[j,b]=a.useState(""),[R,$]=a.useState(""),[L,k]=a.useState(""),[l,y]=a.useState(!1),[E,f]=a.useState(v),[U,D]=a.useState(window.innerHeight);a.useEffect(()=>{const e=()=>{D(window.innerHeight)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),a.useEffect(()=>{async function e(){const n=P;p(n.eventTitle);const i=new URLSearchParams(window.location.search).get("id");if(i)for(let s=0;s<n.events.length;s++){const d=n.events[s],h=n[d];for(let r=0;r<h.length;r++){let o=h[r];const m=o.width<o.height?"w":"h",u=o.width<o.height?o.width:o.height;if(i==o.id){y(!0),S(d),b(n.eventData[d].date),$(x+o.id+`=${m}${z}`),k(x+o.id+`=${m}${u}`);break}}if(l)break}}e()},[]),a.useEffect(()=>{l?document.title=`${w} - ${g}`:document.title="Image not found"},[l]);const N=()=>{const e=window.location.pathname.split("/"),n="?event="+g.toLowerCase();e.length<=3?e.push(n):(e.length=3,e[e.length-1]==""?e[e.length-2]=n:e[e.length-1]=n);const c=e.join("/").replace("//","/");window.location.href=c},C=async()=>{const e=await fetch(L);if(!e.ok)throw new Error("Image download failed.");const n=await e.blob(),c=URL.createObjectURL(n),i=document.createElement("a");i.href=c;const s=new Date,d=s.getFullYear(),h=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0"),o=String(s.getHours()).padStart(2,"0"),m=String(s.getMinutes()).padStart(2,"0"),u=String(s.getSeconds()).padStart(2,"0"),I=String(s.getMilliseconds()).padStart(3,"0"),F=`${document.title}_${d}${h}${r}${o}${m}${u}${I}.jpg`;i.download=F,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(c)};return t.jsx("div",{className:"share-container",style:{height:`${U}px`},children:l?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text back",onClick:()=>N(),children:"Back to Collection"}),t.jsx("div",{className:"text title",children:w}),t.jsx("div",{className:"text subtitle",children:g}),t.jsx("div",{className:"text subtitle",children:j}),t.jsxs("div",{className:"text download",onClick:e=>{e.stopPropagation(),C(),f(H),setTimeout(()=>{f(v)},M)},children:[t.jsx(T,{icon:E}),t.jsx("div",{style:{paddingLeft:5},children:"Download"})]}),t.jsx("div",{className:"image-container",children:t.jsx("img",{src:R,onContextMenu:e=>e.preventDefault()})})]}):t.jsx("div",{className:"not-found-container",children:t.jsx("div",{className:"text not-found-text",children:"Image not found"})})})}A.createRoot(document.getElementById("root")).render(t.jsx(B.StrictMode,{children:t.jsx(O,{})}));
